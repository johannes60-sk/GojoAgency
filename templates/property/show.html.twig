{% extends 'base.html.twig' %}

{% block title property.title %}

{% block body %}

	<div class="jumbotron bg-body-secondary text-dark  rounded-3">
		<div class="container-fluid px-0">

			{% for message in app.flashes('success') %}
				<div id="success-alert" class="alert alert-success">
					{{message}}
				</div>
			{% endfor %}

			{% if not form.vars.valid %}
				<div class="alert alert-danger" id="danger-alert">
					Erreur dans le remplissement du formulaire
				</div>
			{% endif %}


			<div class="row">
				<div class="col-md-7">
					{% if property.picture %}

						<img src="{{vich_uploader_asset(property.picture, 'imageFile') }} " alt="card-img-top" style="width: 100%; height: auto; max-height: 400px">

					{% else %}
						
						<img src="/images/properties/empty.jpg " alt="card-img-top" style="width: 100%; height: 200px;">

					{% endif %}
				</div>
				<div class="col-md-5 my-3">
					<h1>{{property.title}}</h1>
					<h2>{{ property.rooms }}
						pieces .
						{{property.surface}}
						m²</h2>
					<div class="text-primary fs-4 fw-bold">{{ property.formatedPrice }}</div>
					<a href="" class="btn btn-primary" id="contactButton" {% if form.vars.submitted %} style="display: none;" {% endif %}>Contacter l'agence</a>
					<div id="contactForm" class="mt-4" {% if not form.vars.submitted %} style="display: none;" {% endif %}>
						{{ form_start(form) }}
						<div class="row px-3">
							<div class="col">{{ form_row(form.firstname) }}</div>
							<div class="col">{{ form_row(form.lastname) }}</div>
						</div>
						<div class="row px-3">
							<div class="col">{{ form_row(form.phone) }}</div>
							<div class="col">{{ form_row(form.email) }}</div>
						</div>

						<div class="px-3">{{ form_rest(form) }}</div>

						<div class="form-group">
							<button class="btn btn-primary">Envoyer</button>
						</div>

						{{ form_end(form) }}
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-4">

		<p>
			{{property.description | nl2br}}
		</p>

		<div class="row">
			<div class="col-md-8">
				<h2>Caracteristique</h2>
				<table class="table table-striped">
					<tr>
						<td>Surface habitable</td>
						<td>{{property.surface}}
							m²</td>
					</tr>
					<tr>
						<td>Pieces</td>
						<td>{{property.rooms}}</td>
					</tr>
					<tr>
						<td>Chambre</td>
						<td>{{property.bedrooms}}</td>
					</tr>
					<tr>
						<td>Etage</td>
						<td>{{property.floor}}</td>
					</tr>
					<tr>
						<td>Chauffage</td>
						<td>{{property.heatType}}</td>
					</tr>
				</table>
			</div>

			<div class="col-md-4">
				<h2>Specificite</h2>
				<ul class="list-group">
					{% for option in property.options %}
						<li class="list-group-item">{{option.name}}</li>
					{% endfor %}
				</ul>
			</div>
		</div>

	</div>
{% endblock %}
